<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador PID Interativo</title>
    <link rel="stylesheet" href="src/css/layout.css">
</head>

<body>
    <header class="hero-header">
        <h1 class="hero-title">PID Simulator Pro</h1>
        <p class="hero-subtitle">
            Plataforma avan√ßada de simula√ß√£o de controle industrial com caracter√≠sticas real√≠sticas
            para engenheiros e estudantes de automa√ß√£o
        </p>
    </header>

    <div class="simulation-platform">
        <!-- Painel de Controles -->
        <aside class="glass-panel">
            <div class="controls-section">
                <!-- Controles PID -->
                <div class="control-cluster">
                    <div class="cluster-title">‚öôÔ∏è Par√¢metros PID</div>

                    <!-- NOVO: Seletor de Planta -->
                    <div class="control-item">
                        <div class="control-label">
                            <span>Sistema Industrial</span>
                        </div>
                        <select id="plant-selector" class="modern-select">
                            <option value="mechanical">Sistema Mec√¢nico (Original)</option>
                            <option value="temperature">Controle de Temperatura</option>
                            <option value="level">Controle de N√≠vel</option>
                            <option value="motor">Controle de Velocidade</option>
                            <option value="pressure">Controle de Press√£o</option>
                        </select>
                    </div>

                    <div class="control-item">
                        <div class="control-label">
                            <span>Proporcional (Kp)</span>
                            <span class="control-value" id="kp-value">1.50</span>
                        </div>
                        <input type="range" id="kp-slider" class="modern-slider" min="0" max="10" step="0.1" value="1.5"
                            title="Rea√ß√£o ao erro atual - Maior valor = resposta mais r√°pida">
                    </div>

                    <div class="control-item">
                        <div class="control-label">
                            <span>Integral (Ki)</span>
                            <span class="control-value" id="ki-value">0.50</span>
                        </div>
                        <input type="range" id="ki-slider" class="modern-slider" min="0" max="2" step="0.05" value="0.5"
                            title="Elimina erro residual - Essencial para vencer cargas constantes">
                    </div>

                    <div class="control-item">
                        <div class="control-label">
                            <span>Derivativo (Kd)</span>
                            <span class="control-value" id="kd-value">3.50</span>
                        </div>
                        <input type="range" id="kd-slider" class="modern-slider" min="0" max="10" step="0.1" value="3.5"
                            title="Antecipa mudan√ßas - Reduz overshoot e melhora estabilidade">
                    </div>
                </div>

                <!-- Caracter√≠sticas Real√≠sticas -->
                <div class="control-cluster">
                    <div class="cluster-title">üî¨ Condi√ß√µes Reais</div>

                    <div class="control-item">
                        <div class="control-label">
                            <span>Ru√≠do do Sensor</span>
                            <span class="control-value" id="noise-value">0.5</span>
                        </div>
                        <input type="range" id="noise-slider" class="modern-slider" min="0" max="2" step="0.1"
                            value="0.5" title="Simula interfer√™ncias no sensor">
                    </div>

                    <div class="control-item">
                        <div class="control-label">
                            <span>Atraso (segundos)</span>
                            <span class="control-value" id="delay-value">0.10</span>
                        </div>
                        <input type="range" id="delay-slider" class="modern-slider" min="0" max="0.5" step="0.05"
                            value="0.1" title="Atraso entre comando e resposta do sistema">
                    </div>
                </div>
                <!-- NOVO: Controles Avan√ßados -->
                <div class="control-cluster">
                    <div class="cluster-title">üß† Controle Avan√ßado</div>

                    <div class="control-item">
                        <div class="control-label">
                            <span>Setpoint Vari√°vel</span>
                            <span class="control-value" id="setpoint-value">80.0</span>
                        </div>
                        <input type="range" id="setpoint-slider" class="modern-slider" min="0" max="100" step="1"
                            value="80">
                    </div>

                </div>

                <!-- A√ß√µes de Controle -->
                <div class="control-cluster">
                    <div class="cluster-title">üéÆ A√ß√µes</div>

                    <button id="reset-button" class="action-button btn-secondary">
                        üîÑ Reiniciar Sistema
                    </button>
                    <button id="disturbance-button" class="action-button btn-secondary">
                        ‚ö° Perturba√ß√£o: <span class="status-badge status-inactive">Inativa</span>
                    </button>
                    <button id="noise-button" class="action-button btn-secondary">
                        üìä Ru√≠do: <span class="status-badge status-inactive">Off</span>
                    </button>
                    <button id="delay-button" class="action-button btn-secondary">
                        ‚è±Ô∏è Atraso: <span class="status-badge status-inactive">Off</span>
                    </button>
                </div>

                <!-- Cen√°rios Predefinidos -->
                <div class="control-cluster">
                    <div class="cluster-title">üéØ Cen√°rios</div>

                    <!-- NOVO: Cen√°rios Educativos -->
                    <div class="control-item">
                        <button id="scenarios-button" class="action-button btn-primary">
                            üéì Cen√°rios Educativos
                        </button>
                    </div>

                    <div class="preset-grid">
                        <div class="preset-card" data-preset="p_only">
                            <div class="preset-title">P Only</div>
                            <div class="preset-desc">Apenas proporcional</div>
                        </div>
                        <div class="preset-card" data-preset="pi">
                            <div class="preset-title">PI Control</div>
                            <div class="preset-desc">Sem derivativo</div>
                        </div>
                        <div class="preset-card" data-preset="pid_damped">
                            <div class="preset-title">PID Ideal</div>
                            <div class="preset-desc">Bem amortecido</div>
                        </div>
                        <div class="preset-card" data-preset="pid_oscillatory">
                            <div class="preset-title">PID Agressivo</div>
                            <div class="preset-desc">Resposta r√°pida</div>
                        </div>
                        <div class="preset-card" data-preset="noisy_system">
                            <div class="preset-title">Sistema Ruidoso</div>
                            <div class="preset-desc">Com interfer√™ncias</div>
                        </div>
                        <div class="preset-card" data-preset="delayed_system">
                            <div class="preset-title">Processo Lento</div>
                            <div class="preset-desc">Com atraso t√≠pico</div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Teatro de Visualiza√ß√£o -->
        <main class="visualization-theater">
            <div class="theater-header">
                <div class="theater-title">
                    <div class="status-indicator"></div>
                    Resposta do Sistema em Tempo Real
                </div>
                <div style="font-size: 0.9rem; color: var(--text-secondary);">
                    Simula√ß√£o Industrial Avan√ßada
                </div>
            </div>

            <div class="chart-container">
                <canvas id="pidChart"></canvas>
            </div>
        </main>

        <!-- Painel de An√°lise -->
        <aside class="glass-panel">
            <div class="control-cluster">
                <div class="cluster-title">üìà M√©tricas Live</div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Erro Atual</div>
                        <div class="metric-value error" id="currentErrorSpan">0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Termo P</div>
                        <div class="metric-value" id="pTermSpan">0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Termo I</div>
                        <div class="metric-value integral" id="iTermSpan">0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Termo D</div>
                        <div class="metric-value derivative" id="dTermSpan">0.00</div>
                    </div>
                    <!-- NOVAS M√âTRICAS -->
                    <div class="metric-card">
                        <div class="metric-label">IAE</div>
                        <div class="metric-value" id="iae-metric">0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Overshoot</div>
                        <div class="metric-value" id="overshoot-metric">0.0%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Tempo Acomod.</div>
                        <div class="metric-value" id="settling-time-metric">--</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Performance</div>
                        <div class="metric-value" id="performance-metric">--</div>
                    </div>
                </div>
            </div>

            <!-- Status do Sistema -->
            <div class="control-cluster">
                <div class="cluster-title">üîç Status</div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem;">
                    <span style="color: var(--text-secondary);">Setpoint:</span>
                    <span id="status-setpoint-value" style="color: var(--accent-success); font-weight: 600;">80.0</span>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem;">
                    <span style="color: var(--text-secondary);">Perturba√ß√£o:</span>
                    <span id="disturbance-status" style="color: var(--text-muted); font-weight: 600;">Inativa</span>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem;">
                    <span style="color: var(--text-secondary);">Controle:</span>
                    <span style="color: var(--accent-primary); font-weight: 600;">Autom√°tico</span>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="color: var(--text-secondary);">Qualidade:</span>
                    <span id="control-quality" style="color: var(--accent-success); font-weight: 600;">Est√°vel</span>
                </div>
            </div>

            <!-- Dicas Inteligentes -->
            <div class="control-cluster">
                <div class="cluster-title">üí° Dica Inteligente</div>
                <div id="smart-tip" style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.4;">
                    Ajuste os par√¢metros e observe como cada termo afeta a resposta do sistema.
                </div>
            </div>

            <!-- NOVO: Painel de Cen√°rio Ativo -->
            <div class="control-cluster" id="scenario-panel" style="display: none;">
                <div class="cluster-title">üéì Cen√°rio Ativo</div>
                <div id="scenario-info">
                    <div id="scenario-title" style="font-weight: 600; margin-bottom: 0.5rem;"></div>
                    <div id="scenario-description"
                        style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;"></div>
                    <div id="scenario-explanation"
                        style="font-size: 0.85rem; color: var(--text-muted); font-style: italic;"></div>
                    <div id="scenario-progress" style="margin-top: 0.8rem;">
                        <div
                            style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.3rem;">
                            <span id="scenario-step">Passo 1 de 4</span>
                            <span id="scenario-percent">25%</span>
                        </div>
                        <div style="background: var(--border-subtle); height: 4px; border-radius: 2px;">
                            <div id="scenario-progress-bar"
                                style="background: var(--accent-primary); height: 100%; border-radius: 2px; width: 25%; transition: width 0.3s ease;">
                            </div>
                        </div>
                    </div>
                    <button id="stop-scenario-button" class="action-button btn-secondary"
                        style="margin-top: 0.8rem; font-size: 0.8rem; padding: 0.5rem;">
                        ‚èπÔ∏è Parar Cen√°rio
                    </button>
                </div>
            </div>
        </aside>
    </div>

    <!-- NOVO: Modal de Cen√°rios -->
    <div id="scenarios-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üéì Cen√°rios Educativos</h2>
                <button id="close-scenarios-modal" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1.5rem; color: var(--text-secondary);">
                    Escolha um cen√°rio educativo para aprender conceitos de controle PID de forma interativa:
                </p>
                <div id="scenarios-list" class="scenarios-grid">
                    <!-- Ser√° preenchido dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script type="module" src="src/js/main.js"></script>
</body>

</html>